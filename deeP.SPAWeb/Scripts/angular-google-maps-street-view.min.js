/*! angular-google-maps 2.2.1 2015-09-11
 *  AngularJS directives for Google Maps
 *  git: https://github.com/angular-ui/angular-google-maps.git
 */
(function(n,t){"use strict";(function(){t.module("uiGmapgoogle-maps.providers",["nemLogging"]);t.module("uiGmapgoogle-maps.wrapped",[]);t.module("uiGmapgoogle-maps.extensions",["uiGmapgoogle-maps.wrapped","uiGmapgoogle-maps.providers"]);t.module("uiGmapgoogle-maps.directives.api.utils",["uiGmapgoogle-maps.extensions"]);t.module("uiGmapgoogle-maps.directives.api.managers",[]);t.module("uiGmapgoogle-maps.directives.api.options",["uiGmapgoogle-maps.directives.api.utils"]);t.module("uiGmapgoogle-maps.directives.api.options.builders",[]);t.module("uiGmapgoogle-maps.directives.api.models.child",["uiGmapgoogle-maps.directives.api.utils","uiGmapgoogle-maps.directives.api.options","uiGmapgoogle-maps.directives.api.options.builders"]);t.module("uiGmapgoogle-maps.directives.api.models.parent",["uiGmapgoogle-maps.directives.api.managers","uiGmapgoogle-maps.directives.api.models.child","uiGmapgoogle-maps.providers"]);t.module("uiGmapgoogle-maps.directives.api",["uiGmapgoogle-maps.directives.api.models.parent"]);t.module("uiGmapgoogle-maps",["uiGmapgoogle-maps.directives.api","uiGmapgoogle-maps.providers"])}).call(this);t.module("uiGmapgoogle-maps.wrapped").service("uiGmapuuid",function(){function n(){}return n.generate=function(){var t=n._gri,i=n._ha;return i(t(32),8)+"-"+i(t(16),4)+"-"+i(16384|t(12),4)+"-"+i(32768|t(14),4)+"-"+i(t(48),12)},n._gri=function(n){return 0>n?NaN:30>=n?0|Math.random()*(1<<n):53>=n?(0|1073741824*Math.random())+1073741824*(0|Math.random()*(1<<n-30)):NaN},n._ha=function(n,t){for(var i=n.toString(16),r=t-i.length,u="0";0<r;r>>>=1,u+=u)r&1&&(i=u+i);return i},n}),function(){t.module("uiGmapgoogle-maps.providers").factory("uiGmapMapScriptLoader",["$q","uiGmapuuid",function(i,r){var o,f,e,u;return u=void 0,o=function(n){return n.china?"http://maps.google.cn/maps/api/js?":n.transport==="auto"?"//maps.googleapis.com/maps/api/js?":n.transport+"://maps.googleapis.com/maps/api/js?"},f=function(n){var f,i,t;return f=["transport","isGoogleMapsForWork","china"],n.isGoogleMapsForWork&&f.push("key"),i=_.map(_.omit(n,f),function(n,t){return t+"="+n}),u&&document.getElementById(u).remove(),i=i.join("&"),t=document.createElement("script"),t.id=u="ui_gmap_map_load_"+r.generate(),t.type="text/javascript",t.src=o(n)+i,document.body.appendChild(t)},e=function(){return t.isDefined(n.google)&&t.isDefined(n.google.maps)},{load:function(t){var r,u;return(r=i.defer(),e())?(r.resolve(n.google.maps),r.promise):(u=t.callback="onGoogleMapsReady"+Math.round(Math.random()*1e3),n[u]=function(){n[u]=null;r.resolve(n.google.maps)},n.navigator.connection&&n.Connection&&n.navigator.connection.type===n.Connection.NONE?document.addEventListener("online",function(){if(!e())return f(t)}):f(t),r.promise)}}}]).provider("uiGmapGoogleMapApi",function(){return this.options={transport:"https",isGoogleMapsForWork:!1,china:!1,v:"3",libraries:"",language:"en",sensor:"false"},this.configure=function(n){t.extend(this.options,n)},this.$get=["uiGmapMapScriptLoader",function(n){return function(t){return t.load(n.options)}}(this)],this})}.call(this),function(){t.module("uiGmapgoogle-maps.directives.api.utils").service("uiGmapLogger",["nemSimpleLogger",function(n){return n.spawn()}])}.call(this),function(){t.module("uiGmapgoogle-maps.directives.api.utils").service("uiGmapGmapUtil",["uiGmapLogger","$compile",function(n,i){var u,r,f,e,o,s;return r=function(n,t,i){return n===t||i.indexOf(n)!==-1},u=function(n){return r(n,!1,["false","FALSE",0,"n","N","no","NO"])},e=function(n){return Array.isArray(n)&&n.length===2?n[1]:t.isDefined(n.type)&&n.type==="Point"?n.coordinates[1]:n.latitude},o=function(n){return Array.isArray(n)&&n.length===2?n[0]:t.isDefined(n.type)&&n.type==="Point"?n.coordinates[0]:n.longitude},f=function(n){if(n)return Array.isArray(n)&&n.length===2?new google.maps.LatLng(n[1],n[0]):t.isDefined(n.type)&&n.type==="Point"?new google.maps.LatLng(n.coordinates[1],n.coordinates[0]):new google.maps.LatLng(n.latitude,n.longitude)},s=function(n){if(t.isUndefined(n))return!1;if(_.isArray(n)){if(n.length===2)return!0}else if(n!=null&&(n!=null?n.type:void 0)&&n.type==="Point"&&_.isArray(n.coordinates)&&n.coordinates.length===2)return!0;return n&&t.isDefined((n!=null?n.latitude:void 0)&&t.isDefined(n!=null?n.longitude:void 0))?!0:!1},{setCoordsFromEvent:function(n,i){if(n)return Array.isArray(n)&&n.length===2?(n[1]=i.lat(),n[0]=i.lng()):t.isDefined(n.type)&&n.type==="Point"?(n.coordinates[1]=i.lat(),n.coordinates[0]=i.lng()):(n.latitude=i.lat(),n.longitude=i.lng()),n},getLabelPositionPoint:function(n){var t,i;if(n!==void 0)return n=/^([-\d\.]+)\s([-\d\.]+)$/.exec(n),t=parseFloat(n[1]),i=parseFloat(n[2]),t!=null&&i!=null?new google.maps.Point(t,i):void 0},createWindowOptions:function(r,u,e,o){var s;return e!=null&&o!=null&&i!=null?(s=t.extend({},o,{content:this.buildContent(u,o,e),position:o.position!=null?o.position:t.isObject(r)?r.getPosition():f(u.coords)}),r!=null&&(s!=null?s.pixelOffset:void 0)==null&&(s.boxClass==null||(s.pixelOffset={height:0,width:-2})),s):o?o:(n.error("infoWindow defaults not defined"),!e)?n.error("infoWindow content not defined"):void 0},buildContent:function(n,t,r){var f,u;return t.content!=null?u=t.content:i!=null?(r=r.replace(/^\s+|\s+$/g,""),f=r===""?"":i(r)(n),f.length>0&&(u=f[0])):u=r,u},defaultDelay:50,isTrue:function(n){return r(n,!0,["true","TRUE",1,"y","Y","yes","YES"])},isFalse:u,isFalsy:function(n){return r(n,!1,[void 0,null])||u(n)},getCoords:f,validateCoords:s,equalCoords:function(n,t){return e(n)===e(t)&&o(n)===o(t)},validatePath:function(n){var r,i,f,u;if(i=0,t.isUndefined(n.type)){if(!Array.isArray(n)||n.length<2)return!1;while(i<n.length){if(!(t.isDefined(n[i].latitude)&&t.isDefined(n[i].longitude)||typeof n[i].lat=="function"&&typeof n[i].lng=="function"))return!1;i++}return!0}if(t.isUndefined(n.coordinates))return!1;if(n.type==="Polygon"){if(n.coordinates[0].length<4)return!1;r=n.coordinates[0]}else if(n.type==="MultiPolygon"){if(u={max:0,index:0},_.forEach(n.coordinates,function(n,t){if(n[0].length>this.max)return this.max=n[0].length,this.index=t},u),f=n.coordinates[u.index],r=f[0],r.length<4)return!1}else if(n.type==="LineString"){if(n.coordinates.length<2)return!1;r=n.coordinates}else return!1;while(i<r.length){if(r[i].length!==2)return!1;i++}return!0},convertPathPoints:function(n){var r,i,u,f,e;if(i=0,f=new google.maps.MVCArray,t.isUndefined(n.type))while(i<n.length)u,t.isDefined(n[i].latitude)&&t.isDefined(n[i].longitude)?u=new google.maps.LatLng(n[i].latitude,n[i].longitude):typeof n[i].lat=="function"&&typeof n[i].lng=="function"&&(u=n[i]),f.push(u),i++;else for(r,n.type==="Polygon"?r=n.coordinates[0]:n.type==="MultiPolygon"?(e={max:0,index:0},_.forEach(n.coordinates,function(n,t){if(n[0].length>this.max)return this.max=n[0].length,this.index=t},e),r=n.coordinates[e.index][0]):n.type==="LineString"&&(r=n.coordinates);i<r.length;)f.push(new google.maps.LatLng(r[i][1],r[i][0])),i++;return f},getPath:function(n,t){var i;return t==null||!_.isString(t)?t:(i=n,_.each(t.split("."),function(n){if(i)return i=i[n]}),i)},validateBoundPoints:function(n){return t.isUndefined(n.sw.latitude)||t.isUndefined(n.sw.longitude)||t.isUndefined(n.ne.latitude)||t.isUndefined(n.ne.longitude)?!1:!0},convertBoundPoints:function(n){return new google.maps.LatLngBounds(new google.maps.LatLng(n.sw.latitude,n.sw.longitude),new google.maps.LatLng(n.ne.latitude,n.ne.longitude))},fitMapBounds:function(n,t){return n.fitBounds(t)}}}])}.call(this),function(){t.module("uiGmapgoogle-maps.directives.api.utils").service("uiGmapEventsHelper",["uiGmapLogger",function(){var i,n;return n=function(n){return t.isDefined(n.events)&&n.events!=null&&t.isObject(n.events)},i=function(t,i){return n(t)?t:n(i)?i:void 0},{setEvents:function(n,r,u,f){var e;return e=i(r,u),e!=null?_.compact(_.map(e.events,function(i,o){var s;return f&&(s=_(f).contains(o)),e.events.hasOwnProperty(o)&&t.isFunction(e.events[o])&&!s?google.maps.event.addListener(n,o,function(){return r.$evalAsync||(r.$evalAsync=function(){}),r.$evalAsync(i.apply(r,[n,o,u,arguments]))}):void 0})):void 0},removeEvents:function(n){var i,t;if(n)for(i in n)t=n[i],t&&google.maps.event.removeListener(t)}}}])}.call(this),function(){t.module("uiGmapgoogle-maps").directive("uiGmapStreetViewPanorama",["uiGmapGoogleMapApi","uiGmapLogger","uiGmapGmapUtil","uiGmapEventsHelper",function(n,i,r,u){var f;return f="uiGmapStreetViewPanorama",{restrict:"EMA",template:'<div class="angular-google-map-street-view-panorama"><\/div>',replace:!0,scope:{focalcoord:"=",radius:"=?",events:"=?",options:"=?",control:"=?",povoptions:"=?",imagestatus:"="},link:function(e,o){return n.then(function(){return function(){var a,v,c,y,w,p,s,h,l,n;return h=void 0,n=void 0,c=!1,p=void 0,s=null,l=null,a=function(){return u.removeEvents(p),h!=null&&(h.unbind("position"),h.setVisible(!1)),n!=null?((n!=null?n.setVisible:void 0)!=null&&n.setVisible(!1),n=void 0):void 0},w=function(n,i){var r;return r=google.maps.geometry.spherical.computeHeading(n,i),c=!0,e.radius=e.radius||50,l=t.extend({heading:r,zoom:1,pitch:0},e.povoptions||{}),s=s=t.extend({navigationControl:!1,addressControl:!1,linksControl:!1,position:n,pov:l,visible:!0},e.options||{}),c=!1},v=function(){var t;if(!e.focalcoord){i.error(f+": focalCoord needs to be defined");return}if(!e.radius){i.error(f+": needs a radius to set the camera view from its focal target.");return}return a(),n==null&&(n=new google.maps.StreetViewService),e.events&&(p=u.setEvents(n,e,e)),t=r.getCoords(e.focalcoord),n.getPanoramaByLocation(t,e.radius,function(i,r){var u,f,c;return e.imagestatus!=null&&(e.imagestatus=r),((c=e.events)!=null?c.image_status_changed:void 0)!=null&&e.events.image_status_changed(n,"image_status_changed",e,r),r==="OK"?(f=i.location.latLng,w(f,t),u=o[0],h=new google.maps.StreetViewPanorama(u,s)):void 0})},e.control!=null&&(e.control.getOptions=function(){return s},e.control.getPovOptions=function(){return l},e.control.getGObject=function(){return n},e.control.getGPano=function(){return h}),e.$watch("options",function(n,t){if(n!==t&&n!==s&&!c)return v()}),y=!0,e.$watch("focalcoord",function(n,t){if(n!==t||y)return n==null?void 0:(y=!1,v())}),e.$on("$destroy",function(){return a()})}}(this))}}}])}.call(this)})(window,angular);
//# sourceMappingURL=angular-google-maps-street-view.min.js.map
